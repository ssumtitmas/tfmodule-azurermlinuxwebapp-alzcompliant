# Example terraform.tfvars for External-Facing Web App Deployment
# Copy this file to terraform.tfvars and customize for your environment

# Core Configuration
workload_name       = "myapp"
environment         = "prod"
location            = "East US 2"
resource_group_name = "rg-myapp-prod-eastus2-001"

# Optional: Use existing App Service Plan or create new one
# app_service_plan_id = "/subscriptions/{subscription-id}/resourceGroups/{rg-name}/providers/Microsoft.Web/serverfarms/{plan-name}"
app_service_plan_sku = "P1v3"

# Runtime Configuration
linux_fx_version = "NODE|18-lts"

# Site Configuration
site_config = {
  always_on              = true
  use_32_bit_worker      = false
  websockets_enabled     = false
  health_check_path      = "/health"
  client_affinity_enabled = false
}

# Application Settings
app_settings = {
  "WEBSITE_NODE_DEFAULT_VERSION"     = "18.17.0"
  "NODE_ENV"                         = "production"
  "WEBSITE_HTTPLOGGING_RETENTION_DAYS" = "30"
  "WEBSITE_HEALTHCHECK_MAXPINGFAILURES" = "3"
  "WEBSITE_RUN_FROM_PACKAGE"        = "1"
}

# Optional: User-assigned managed identities
# user_assigned_identity_ids = [
#   "/subscriptions/{subscription-id}/resourceGroups/{rg-name}/providers/Microsoft.ManagedIdentity/userAssignedIdentities/{identity-name}"
# ]

# Required: Log Analytics Workspace for ALZ compliance
log_analytics_workspace_id = "/subscriptions/{subscription-id}/resourceGroups/{rg-name}/providers/Microsoft.OperationalInsights/workspaces/{workspace-name}"

# Diagnostic Log Categories
diagnostic_log_categories = [
  "AppServiceHTTPLogs",
  "AppServiceConsoleLogs",
  "AppServiceAppLogs",
  "AppServiceAuditLogs",
  "AppServiceIPSecAuditLogs",
  "AppServicePlatformLogs"
]

# ALZ Compliance Tags
tags = {
  Environment        = "Production"
  Owner             = "Platform Team"
  CostCenter        = "IT-001"
  Compliance        = "ALZ"
  DataClassification = "Public"
  NetworkType       = "External"
}
